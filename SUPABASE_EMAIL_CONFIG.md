# ๐ง ุฅุนุฏุงุฏุงุช ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ูู Supabase

**ุงูุชุงุฑูุฎ:** 26 ุฃูุชูุจุฑ 2025  
**ุงูุญุงูุฉ:** ๐ ุฏููู ุงูุฅุนุฏุงุฏ

---

## ๐ง ุฎุทูุงุช ุงูุฅุนุฏุงุฏ

### ุงูุฎุทูุฉ 1: ุงููุตูู ุฅูู Supabase Dashboard

1. ุงุฐูุจ ุฅูู: https://app.supabase.com/
2. ุงุฎุชุฑ ุงููุดุฑูุน: `MONEY_MANAGER`
3. ุงุฐูุจ ุฅูู: **Authentication** โ **Email Templates**

---

### ุงูุฎุทูุฉ 2: ุชุฎุตูุต Email Templates

#### 2.1 ุชุฎุตูุต ุงุณู ุงููุฑุณู

ูู ูู ูุงูุจ ุจุฑูุฏ:

1. ุงุถุบุท ุนูู ุงููุงูุจ
2. ุงุจุญุซ ุนู: `From: support@example.com`
3. ุบููุฑู ุฅูู: `noreply@moneymanager.com`
4. ุบููุฑ ุงูุงุณู ุฅูู: `ุงูุฅุฏุงุฑุฉ ุงููุงููุฉ ุงูุดุงููุฉ`

#### 2.2 ุงูููุงูุจ ุงููุทููุจุฉ

**1. Confirm signup (ุชุฃููุฏ ุงูุชุณุฌูู)**
```
Subject: ุชุฃููุฏ ุญุณุงุจู - ุงูุฅุฏุงุฑุฉ ุงููุงููุฉ ุงูุดุงููุฉ
From: ุงูุฅุฏุงุฑุฉ ุงููุงููุฉ ุงูุดุงููุฉ <noreply@moneymanager.com>

ูุญุชูู ูุฎุตุต:
- ุดุนุงุฑ ุงููููุน
- ุฑุณุงูุฉ ุชุฑุญูุจ
- ุฑุงุจุท ุงูุชุฃููุฏ ุฃู ุฑูุฒ OTP
```

**2. Invite user (ุฏุนูุฉ ูุณุชุฎุฏู)**
```
Subject: ุฃูุช ูุฏุนู ููุงูุถูุงู - ุงูุฅุฏุงุฑุฉ ุงููุงููุฉ ุงูุดุงููุฉ
From: ุงูุฅุฏุงุฑุฉ ุงููุงููุฉ ุงูุดุงููุฉ <noreply@moneymanager.com>
```

**3. Magic Link (ุฑุงุจุท ุณุญุฑู)**
```
Subject: ุฑุงุจุท ุชุณุฌูู ุงูุฏุฎูู - ุงูุฅุฏุงุฑุฉ ุงููุงููุฉ ุงูุดุงููุฉ
From: ุงูุฅุฏุงุฑุฉ ุงููุงููุฉ ุงูุดุงููุฉ <noreply@moneymanager.com>
```

**4. Change Email (ุชุบููุฑ ุงูุจุฑูุฏ)**
```
Subject: ุชุฃููุฏ ุชุบููุฑ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
From: ุงูุฅุฏุงุฑุฉ ุงููุงููุฉ ุงูุดุงููุฉ <noreply@moneymanager.com>
```

**5. Reset Password (ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ)**
```
Subject: ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ - ุงูุฅุฏุงุฑุฉ ุงููุงููุฉ ุงูุดุงููุฉ
From: ุงูุฅุฏุงุฑุฉ ุงููุงููุฉ ุงูุดุงููุฉ <noreply@moneymanager.com>
```

---

### ุงูุฎุทูุฉ 3: ุฅุนุฏุงุฏุงุช SMTP

#### 3.1 ุงูุชุญูู ูู ุฅุนุฏุงุฏุงุช SMTP

1. ุงุฐูุจ ุฅูู: **Authentication** โ **Providers** โ **Email**
2. ุชุญูู ูู:
   - โ SMTP Host: `smtp.resend.com` (ุฃู ุฎุงุฏู SMTP ุขุฎุฑ)
   - โ SMTP Port: `587` ุฃู `465`
   - โ SMTP User: ุจุฑูุฏู ุงูุฅููุชุฑููู
   - โ SMTP Password: ูููุฉ ุงููุฑูุฑ

#### 3.2 ุชุญุณูู ุณุฑุนุฉ ุงูุฅุฑุณุงู

**ุงูุฎูุงุฑ 1: ุงุณุชุฎุฏุงู Resend API (ุงูุฃุณุฑุน)**
```
1. ุงุฐูุจ ุฅูู: https://resend.com/
2. ุฃูุดุฆ ุญุณุงุจ ูุฌุงูู
3. ุงุญุตู ุนูู API Key
4. ูู Supabase:
   - ุงุฎุชุฑ: Resend
   - ุฃุฏุฎู: API Key
```

**ุงูุฎูุงุฑ 2: ุงุณุชุฎุฏุงู SendGrid**
```
1. ุงุฐูุจ ุฅูู: https://sendgrid.com/
2. ุฃูุดุฆ ุญุณุงุจ
3. ุงุญุตู ุนูู API Key
4. ูู Supabase:
   - ุงุฎุชุฑ: SendGrid
   - ุฃุฏุฎู: API Key
```

**ุงูุฎูุงุฑ 3: ุงุณุชุฎุฏุงู Mailgun**
```
1. ุงุฐูุจ ุฅูู: https://www.mailgun.com/
2. ุฃูุดุฆ ุญุณุงุจ
3. ุงุญุตู ุนูู API Key
4. ูู Supabase:
   - ุงุฎุชุฑ: Mailgun
   - ุฃุฏุฎู: API Key
```

---

### ุงูุฎุทูุฉ 4: ุฅุนุฏุงุฏุงุช ุงููุตุงุฏูุฉ

#### 4.1 ุชูุนูู Email Confirmations

1. ุงุฐูุจ ุฅูู: **Authentication** โ **Providers** โ **Email**
2. ูุนูู: **Confirm email**
3. ุงุฎุชุฑ: **Require email confirmation to sign up**

#### 4.2 ุชุนููู Redirect URLs

1. ุงุฐูุจ ุฅูู: **Authentication** โ **URL Configuration**
2. ุฃุถู:
   - **Site URL:** `https://moneymanager-henna.vercel.app`
   - **Redirect URLs:**
     - `https://moneymanager-henna.vercel.app/auth/callback`
     - `https://moneymanager-henna.vercel.app/verify-otp`
     - `http://localhost:3000/auth/callback` (ููุชุทููุฑ)
     - `http://localhost:3000/verify-otp` (ููุชุทููุฑ)

---

### ุงูุฎุทูุฉ 5: ุฅุนุฏุงุฏุงุช OTP

#### 5.1 ุฅูุดุงุก ุฌุฏูู OTP

```sql
-- ุชู ุฅูุดุงุก ุงูุฌุฏูู ูู:
supabase/migrations/create_otp_table.sql

-- ูุชุทุจูู ุงููุฌุฑุฉ:
1. ุงุฐูุจ ุฅูู: SQL Editor
2. ุงูุณุฎ ูุญุชูู ุงูููู
3. ุงุถุบุท: Run
```

#### 5.2 ุชูุนูู Row Level Security

```sql
-- ุชู ุชูุนูู RLS ูู ุงูููู
-- ุชุญูู ูู:
1. ุงุฐูุจ ุฅูู: Table Editor
2. ุงุฎุชุฑ: otp_codes
3. ุชุญูู ูู: RLS is enabled
```

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑ ุฅุฑุณุงู ุงูุจุฑูุฏ

```bash
# 1. ุดุบูู ุงูุชุทุจูู ูุญููุงู
npm run dev

# 2. ุงุฐูุจ ุฅูู ุตูุญุฉ ุงูุชุณุฌูู
http://localhost:3000/login

# 3. ุงุฎุชุฑ: ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ

# 4. ุฃุฏุฎู:
- ุงูุจุฑูุฏ ุงูุฅููุชุฑููู: test@example.com
- ูููุฉ ุงููุฑูุฑ: Test123456

# 5. ุชุญูู ูู:
- โ ูู ุชู ุฅุฑุณุงู ุงูุจุฑูุฏุ
- โ ูู ุงุณู ุงููุฑุณู ุตุญูุญุ
- โ ูู ุงูุชุตููู ุตุญูุญุ
```

### ุงุฎุชุจุงุฑ OTP

```bash
# 1. ุจุนุฏ ุฅุฑุณุงู ุงูุจุฑูุฏ

# 2. ุงูุณุฎ ุฑูุฒ OTP ูู ุงูุจุฑูุฏ

# 3. ุงุฐูุจ ุฅูู ุตูุญุฉ ุงูุชูุนูู
http://localhost:3000/verify-otp?email=test@example.com

# 4. ุฃุฏุฎู ุงูุฑูุฒ

# 5. ุชุญูู ูู:
- โ ูู ุชู ุงูุชุญูู ูู ุงูุฑูุฒุ
- โ ูู ุชู ุฅุนุงุฏุฉ ุงูุชูุฌูู ุฅูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉุ
```

---

## ๐ ุงููุฑุงูุจุฉ

### ูุฑุงูุจุฉ ุฑุณุงุฆู ุงูุจุฑูุฏ

1. ุงุฐูุจ ุฅูู: **Authentication** โ **Logs**
2. ุงุจุญุซ ุนู: `email_sent`
3. ุชุญูู ูู:
   - โ ุนุฏุฏ ุงูุฑุณุงุฆู ุงููุฑุณูุฉ
   - โ ุงูุฃุฎุทุงุก (ุฅู ูุฌุฏุช)

### ูุฑุงูุจุฉ OTP

```sql
-- ุนุฑุถ ุฌููุน ุฑููุฒ OTP
SELECT * FROM otp_codes ORDER BY created_at DESC;

-- ุนุฑุถ ุงูุฑููุฒ ุงูููุชููุฉ ุงูุตูุงุญูุฉ
SELECT * FROM otp_codes WHERE expires_at < NOW();

-- ุนุฑุถ ุงูุฑููุฒ ุงููุชุญููุฉ
SELECT * FROM otp_codes WHERE verified = true;
```

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

1. โ ุชุทุจูู ุงููุฌุฑุฉ (create_otp_table.sql)
2. โ ุชุฎุตูุต Email Templates
3. โ ุฅุนุฏุงุฏ SMTP
4. โ ุงุฎุชุจุงุฑ ุงููุธุงู
5. โ ูุดุฑ ุนูู Vercel

---

**ุชู ุฅูุดุงุก ูุฐุง ุงูุฏููู ูุชุณููู ุฅุนุฏุงุฏ ูุธุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู**

