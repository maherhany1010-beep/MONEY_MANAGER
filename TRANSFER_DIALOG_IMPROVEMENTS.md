# ๐ ุชุญุณููุงุช ูููุฐุฌ ุงูุชุญููู ุงููุฑูุฒู
# Central Transfer Dialog Improvements

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุญุณูู ูููุฐุฌ ุงูุชุญููู ุงููุฑูุฒู ุจุฅุถุงูุฉ ูููุฒุงุช ุงุญุชุฑุงููุฉ ุฌุฏูุฏุฉ ูุชูููุฑ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุฃูุถู ูุชุญูู ุฃูุจุฑ ูู ุนูููุงุช ุงูุชุญููู.

---

## โจ ุงููููุฒุงุช ุงูุฌุฏูุฏุฉ

### 1๏ธโฃ **ูุธุงู ุงูุฑุณูู (Fees System)** ๐ฐ

#### ุงููููุฒุงุช:
- โ ุฅุถุงูุฉ ุญูู ุงุฎุชูุงุฑู ูุฑุณูู ุงูุชุญููู
- โ ุชุญุฏูุฏ ูู ูุชุญูู ุงูุฑุณูู (ุงููุฑุณูุ ุงููุณุชูุจูุ ูุง ุฃุญุฏ)
- โ ุญุณุงุจ ุชููุงุฆู ูููุจุงูุบ ุงูููุงุฆูุฉ
- โ ุนุฑุถ ูุงุถุญ ููุฑุณูู ูู ุงููุนุงููุฉ

#### ููููุฉ ุงูุงุณุชุฎุฏุงู:

##### **ุฅุถุงูุฉ ุฑุณูู:**
```
ุงููุจูุบ ุงูุฃุณุงุณู: 10,000 EGP
ุฑุณูู ุงูุชุญููู: 50 EGP
```

##### **ุงุฎุชูุงุฑ ูู ูุชุญูู ุงูุฑุณูู:**

**1. ุงููุฑุณู (Sender):**
```
ุงููุจูุบ ุงูุฃุณุงุณู: 10,000 EGP
ุงูุฑุณูู: 50 EGP
ุงููุฎุตูู ูู ุงููุฑุณู: 10,050 EGP
ุงููุถุงู ูููุณุชูุจู: 10,000 EGP
```

**2. ุงููุณุชูุจู (Receiver):**
```
ุงููุจูุบ ุงูุฃุณุงุณู: 10,000 EGP
ุงูุฑุณูู: 50 EGP
ุงููุฎุตูู ูู ุงููุฑุณู: 10,000 EGP
ุงููุถุงู ูููุณุชูุจู: 9,950 EGP
```

**3. ูุง ุฃุญุฏ (None):**
```
ุงููุจูุบ ุงูุฃุณุงุณู: 10,000 EGP
ุงูุฑุณูู: 50 EGP (ููุณุฌู ููุท)
ุงููุฎุตูู ูู ุงููุฑุณู: 10,000 EGP
ุงููุถุงู ูููุณุชูุจู: 10,000 EGP
```

---

### 2๏ธโฃ **ุงูุจุญุซ ุงูุฐูู (Smart Search)** ๐

#### ุงููููุฒุงุช:
- โ ุงุณุชุจุฏุงู Select ุจู Combobox ููุจุญุซ ุงูุฐูู
- โ ุงูุจุญุซ ุงูููุฑู ุนูุฏ ุงููุชุงุจุฉ
- โ ุงูุจุญุซ ูู: ุงุณู ุงูุญุณุงุจุ ุฑูู ุงูุญุณุงุจุ ููุน ุงูุญุณุงุจ
- โ ุนุฑุถ ุงููุชุงุฆุฌ ูุน ุฃููููุงุช ูููุฒุฉ
- โ ุนุฑุถ ุงูุฑุตูุฏ ูุฑูู ุงูุญุณุงุจ ูู ุงููุชุงุฆุฌ

#### ููููุฉ ุงูุงุณุชุฎุฏุงู:

##### **ุงูุจุญุซ ุจุงูุงุณู:**
```
ุงูุชุจ: "ุฌุงุฑู"
ุงููุชุงุฆุฌ:
  ๐ฆ ุญุณุงุจู ุงูุฌุงุฑู ุงูุฑุฆูุณู - 50,000 EGP โข 1234567890
  ๐ฆ ุญุณุงุจู ุงูุฌุงุฑู ุงูุซุงููู - 30,000 EGP โข 0987654321
```

##### **ุงูุจุญุซ ุจุฑูู ุงูุญุณุงุจ:**
```
ุงูุชุจ: "1234"
ุงููุชุงุฆุฌ:
  ๐ฆ ุญุณุงุจู ุงูุฌุงุฑู ุงูุฑุฆูุณู - 50,000 EGP โข 1234567890
  ๐ณ ุจุทุงูุฉ ููุฑู - 5,000 EGP โข 1234
```

##### **ุงูุจุญุซ ุจููุน ุงูุญุณุงุจ:**
```
ุงูุชุจ: "ูุญูุธุฉ"
ุงููุชุงุฆุฌ:
  ๐ฑ ููุฏุงููู ูุงุด - 5,000 EGP โข 01012345678
  ๐ฑ ุงุชุตุงูุงุช ูุงุด - 3,000 EGP โข 01198765432
```

---

### 3๏ธโฃ **ุญุงูุฉ ุงููุนุงููุฉ (Transaction Status)** ๐

#### ุงููููุฒุงุช:
- โ ุงุฎุชูุงุฑ ุญุงูุฉ ุงูุชุญููู ูุจู ุงูุชูููุฐ
- โ ุญุงูุชุงู: ููุชููุฉ (Completed) ุฃู ูุนููุฉ (Pending)
- โ ุชูููุฐ ููุฑู ุฃู ุญูุธ ุจุฏูู ุชูููุฐ
- โ ุนุฑุถ ุงูุญุงูุฉ ูู ุงููุนุงููุฉ

#### ุงูุญุงูุงุช ุงููุชุงุญุฉ:

##### **1. ููุชููุฉ (Completed):**
```
โ ูุชู ุชูููุฐ ุงูุชุญููู ููุฑุงู
โ ุชุญุฏูุซ ุงูุฃุฑุตุฏุฉ ูุจุงุดุฑุฉ
โ ุชุญุฏูุซ ุงูุญุฏูุฏ ุงูููููุฉ ูุงูุดูุฑูุฉ
โ ุงูุชุญูู ูู ููุงูุฉ ุงูุฑุตูุฏ ูุงูุญุฏูุฏ
```

##### **2. ูุนููุฉ (Pending):**
```
โธ๏ธ ูุชู ุญูุธ ุงูุชุญููู ุจุฏูู ุชูููุฐ
โธ๏ธ ูุง ูุชู ุชุญุฏูุซ ุงูุฃุฑุตุฏุฉ
โธ๏ธ ูุง ูุชู ุชุญุฏูุซ ุงูุญุฏูุฏ
โธ๏ธ ูููู ุชูููุฐู ูุงุญูุงู
```

#### ููููุฉ ุงูุงุณุชุฎุฏุงู:

**ููุชูููุฐ ุงูููุฑู:**
```
ุงูุญุงูุฉ: ููุชููุฉ - ุชูููุฐ ููุฑู
ุงูุฒุฑ: โ ุชูููุฐ ุงูุชุญููู ููุฑุงู
```

**ููุญูุธ ููุนูู:**
```
ุงูุญุงูุฉ: ูุนููุฉ - ุญูุธ ุจุฏูู ุชูููุฐ
ุงูุฒุฑ: โ๏ธ ุญูุธ ููุนูู
```

---

### 4๏ธโฃ **ูุนุงููุฉ ูุญุณููุฉ (Enhanced Preview)** ๐๏ธ

#### ุงููููุฒุงุช:
- โ ุนุฑุถ ุชูุตููู ูููุฑุณู ูุงููุณุชูุจู
- โ ุญุณุงุจ ุงููุจุงูุบ ุงูููุงุฆูุฉ
- โ ุนุฑุถ ุงูุฑุณูู ููู ูุชุญูููุง
- โ ุนุฑุถ ุงูุฃุฑุตุฏุฉ ูุจู ูุจุนุฏ ุงูุชุญููู
- โ ุชุตููู ุฌุฐุงุจ ูุน ุชุฏุฑุฌุงุช ููููุฉ

#### ูุซุงู ุนูู ุงููุนุงููุฉ:

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ๐ฐ ูุนุงููุฉ ุงูุชุญููู                                      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                         โ
โ  ุงููุฑุณู ๐ฆ                    ุงููุณุชูุจู ๐ฐ              โ
โ  โโโโโโโโโโโโโโโโโ            โโโโโโโโโโโโโโโโโ         โ
โ  ุญุณุงุจู ุงูุฌุงุฑู ุงูุฑุฆูุณู        ุงูุฎุฒููุฉ ุงูุฑุฆูุณูุฉ         โ
โ                                                         โ
โ  ุงูุฑุตูุฏ ุงูุญุงูู: 50,000 EGP   ุงูุฑุตูุฏ ุงูุญุงูู: 25,000 EGPโ
โ  ุงููุจูุบ ุงููุญูู: -10,000 EGP   ุงููุจูุบ ุงููุณุชูู: +10,000  โ
โ  ุงูุฑุณูู: -50 EGP              ุงูุฑุณูู: -                โ
โ  โโโโโโโโโโโโโโโโโ            โโโโโโโโโโโโโโโโโ         โ
โ  ุงููุฎุตูู ุงูููู: -10,050 EGP   ุงููุถุงู ุงูููู: +10,000   โ
โ  ุงูุฑุตูุฏ ุจุนุฏ: 39,950 EGP      ุงูุฑุตูุฏ ุจุนุฏ: 35,000 EGP   โ
โ                                                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ุงููุจูุบ ุงูุฃุณุงุณู: 10,000 EGP                            โ
โ  ุงูุฑุณูู: 50 EGP                                        โ
โ  ูุชุญูู ุงูุฑุณูู: ุงููุฑุณู                                  โ
โ  ุงูุญุงูุฉ: ููุชููุฉ - ุชูููุฐ ููุฑู                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐๏ธ ุงูุชุญุฏูุซุงุช ุงูุชูููุฉ

### ุงููููุงุช ุงููุญุฏุซุฉ:

#### 1. **Context (central-transfers-context.tsx)**
```typescript
export type FeeBearer = 'sender' | 'receiver' | 'none'

export interface CentralTransfer {
  // ... ุงูุญููู ุงูููุฌูุฏุฉ
  fee?: number
  feeBearer?: FeeBearer
  finalAmountFrom?: number
  finalAmountTo?: number
}
```

#### 2. **Combobox Component (ui/combobox.tsx)**
```typescript
export interface ComboboxOption {
  value: string
  label: string
  searchText?: string
  icon?: React.ReactNode
  subtitle?: string
  disabled?: boolean
}
```

#### 3. **Command Component (ui/command.tsx)**
- ูููู ุฌุฏูุฏ ูู shadcn/ui
- ูุฏุนู ุงูุจุญุซ ูุงูุชุตููุฉ
- ูุงุฌูุฉ ุณููุฉ ุงูุงุณุชุฎุฏุงู

#### 4. **Dialog (central-transfer-dialog.tsx)**
```typescript
const [formData, setFormData] = useState({
  // ... ุงูุญููู ุงูููุฌูุฏุฉ
  fee: '',
  feeBearer: 'none' as FeeBearer,
  status: 'completed' as 'completed' | 'pending',
})
```

---

## ๐จ ุงูุชุตููู

### ุงูุฃููุงู ุงููุณุชุฎุฏูุฉ:

#### **ุญููู ุงูุฅุฏุฎุงู:**
- **ุงูุญุณุงุจ ุงููุตุฏุฑ**: ุฎูููุฉ ุญูุฑุงุก ูุงุชุญุฉ (Red-50)
- **ุงูุญุณุงุจ ุงููุณุชูุฏู**: ุฎูููุฉ ุฎุถุฑุงุก ูุงุชุญุฉ (Green-50)
- **ุชูุงุตูู ุงููุจูุบ**: ุฎูููุฉ ุฒุฑูุงุก ูุงุชุญุฉ (Blue-50)
- **ุญุงูุฉ ุงููุนุงููุฉ**: ุฎูููุฉ ุจููุณุฌูุฉ ูุงุชุญุฉ (Purple-50)

#### **ุงููุนุงููุฉ:**
- **ุฎูููุฉ**: ุชุฏุฑุฌ ูู Blue-50 ุฅูู Indigo-50
- **ุงููุฑุณู**: ุญุฏูุฏ ุญูุฑุงุก (Red-200)
- **ุงููุณุชูุจู**: ุญุฏูุฏ ุฎุถุฑุงุก (Green-200)

#### **ุงูุฃููููุงุช:**
- ๐ฆ **ุญุณุงุจ ุจููู**: ุฃุฒุฑู (Blue-600)
- ๐ฐ **ุฎุฒููุฉ ููุฏูุฉ**: ุฃุฎุถุฑ (Green-600)
- ๐ฑ **ูุญูุธุฉ ุฅููุชุฑูููุฉ**: ุจููุณุฌู (Purple-600)
- ๐ณ **ุจุทุงูุฉ ูุณุจูุฉ**: ุจุฑุชูุงูู (Orange-600)
- ๐ฅ๏ธ **ูุงูููุฉ ุฏูุน**: ูููู (Indigo-600)

---

## ๐ ุงูุชุญููุงุช ุงูุฌุฏูุฏุฉ

### 1. **ุงูุชุญูู ูู ุงูุฑุณูู:**
```typescript
if (fee < 0) {
  setError('ูุฑุฌู ุฅุฏุฎุงู ุฑุณูู ุตุญูุญุฉ')
  return
}
```

### 2. **ุงูุชุญูู ูู ุงูุฑุตูุฏ ุจุนุฏ ุงูุฑุณูู:**
```typescript
if (fromAccount.balance < finalAmountFrom) {
  setError('ุงูุฑุตูุฏ ุบูุฑ ูุงูู (ุจุนุฏ ุงุญุชุณุงุจ ุงูุฑุณูู)')
  return
}
```

### 3. **ุงูุชุญูู ูู ุงูุญุฏูุฏ (ููุท ููููุชููุฉ):**
```typescript
if (formData.status === 'completed') {
  if (fromAccount.dailyUsed + finalAmountFrom > fromAccount.dailyLimit) {
    setError('ุชุฌุงูุฒ ุงูุญุฏ ุงููููู')
    return
  }
}
```

---

## ๐ ุฃูุซูุฉ ุนูููุฉ

### ูุซุงู 1: ุชุญููู ูุน ุฑุณูู ูุชุญูููุง ุงููุฑุณู
```
ูู: ุญุณุงุจู ุงูุฌุงุฑู (50,000 EGP)
ุฅูู: ุงูุฎุฒููุฉ ุงูุฑุฆูุณูุฉ (25,000 EGP)
ุงููุจูุบ: 10,000 EGP
ุงูุฑุณูู: 50 EGP
ูุชุญูู ุงูุฑุณูู: ุงููุฑุณู
ุงูุญุงูุฉ: ููุชููุฉ

ุงููุชูุฌุฉ:
  โ ุฑุตูุฏ ุงูุญุณุงุจ: 39,950 EGP (-10,050)
  โ ุฑุตูุฏ ุงูุฎุฒููุฉ: 35,000 EGP (+10,000)
```

### ูุซุงู 2: ุชุญููู ูุนูู ุจุฏูู ุฑุณูู
```
ูู: ุญุณุงุจู ุงูุฌุงุฑู (50,000 EGP)
ุฅูู: ููุฏุงููู ูุงุด (5,000 EGP)
ุงููุจูุบ: 3,000 EGP
ุงูุฑุณูู: -
ุงูุญุงูุฉ: ูุนููุฉ

ุงููุชูุฌุฉ:
  โธ๏ธ ุฑุตูุฏ ุงูุญุณุงุจ: 50,000 EGP (ุจุฏูู ุชุบููุฑ)
  โธ๏ธ ุฑุตูุฏ ุงููุญูุธุฉ: 5,000 EGP (ุจุฏูู ุชุบููุฑ)
  โ ุงูุชุญููู ูุญููุธ ููุนูู
```

### ูุซุงู 3: ุชุญููู ูุน ุฑุณูู ูุชุญูููุง ุงููุณุชูุจู
```
ูู: ุงูุฎุฒููุฉ ุงูุฑุฆูุณูุฉ (35,000 EGP)
ุฅูู: ุจุทุงูุฉ ููุฑู (2,000 EGP)
ุงููุจูุบ: 5,000 EGP
ุงูุฑุณูู: 25 EGP
ูุชุญูู ุงูุฑุณูู: ุงููุณุชูุจู
ุงูุญุงูุฉ: ููุชููุฉ

ุงููุชูุฌุฉ:
  โ ุฑุตูุฏ ุงูุฎุฒููุฉ: 30,000 EGP (-5,000)
  โ ุฑุตูุฏ ุงูุจุทุงูุฉ: 6,975 EGP (+4,975)
```

---

## ๐ ุงููููุฒุงุช ุงูุฅุถุงููุฉ

### 1. **ุชุฌุฑุจุฉ ูุณุชุฎุฏู ูุญุณููุฉ:**
- โ ุจุญุซ ุณุฑูุน ูุณูู
- โ ูุนุงููุฉ ูุงุถุญุฉ ูููุตูุฉ
- โ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ
- โ ุชุตููู ุฌุฐุงุจ ูููุธู

### 2. **ูุฑููุฉ ูู ุงูุงุณุชุฎุฏุงู:**
- โ ุฑุณูู ุงุฎุชูุงุฑูุฉ
- โ ุงุฎุชูุงุฑ ูู ูุชุญูู ุงูุฑุณูู
- โ ุชูููุฐ ููุฑู ุฃู ูุนูู
- โ ููุงุญุธุงุช ูุฎุตุตุฉ

### 3. **ุฏูุฉ ูู ุงูุญุณุงุจุงุช:**
- โ ุญุณุงุจ ุชููุงุฆู ูููุจุงูุบ ุงูููุงุฆูุฉ
- โ ุนุฑุถ ุงูุฃุฑุตุฏุฉ ูุจู ูุจุนุฏ
- โ ุงูุชุญูู ูู ุงูุญุฏูุฏ
- โ ูุนุงูุฌุฉ ุงูุฑุณูู ุจุฏูุฉ

---

## ๐ ุงูุฎูุงุตุฉ

ุชู ุชุญุณูู ูููุฐุฌ ุงูุชุญููู ุงููุฑูุฒู ุจูุฌุงุญ ุจุฅุถุงูุฉ:
- โ **ูุธุงู ุฑุณูู ูุชูุงูู** ูุน ุฎูุงุฑุงุช ูุฑูุฉ
- โ **ุจุญุซ ุฐูู** ููุญุณุงุจุงุช ูุน Combobox
- โ **ุญุงูุงุช ูุนุงููุงุช** (ููุชููุฉ/ูุนููุฉ)
- โ **ูุนุงููุฉ ูุญุณููุฉ** ูุน ุชูุงุตูู ูุงููุฉ
- โ **ุชุญููุงุช ุดุงููุฉ** ููุฑุตูุฏ ูุงูุญุฏูุฏ ูุงูุฑุณูู
- โ **ุชุตููู ุงุญุชุฑุงูู** ูุน ุชุฏุฑุฌุงุช ูุฃููููุงุช
- โ **ุชุฌุฑุจุฉ ูุณุชุฎุฏู ููุชุงุฒุฉ** ุณููุฉ ูุณูุณุฉ

**๐ ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุจุฌููุน ุงููููุฒุงุช ุงูุฌุฏูุฏุฉ!**

