# ๐ณ ุชูุซูู ููุฒุฉ ุชูุณูุท ุงููุนุงููุงุช ูู ูููุฐุฌ ุงูุดุฑุงุก

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅุถุงูุฉ ููุฒุฉ **ุชูุณูุท ุงููุนุงููุงุช** ูุจุงุดุฑุฉ ูู ูููุฐุฌ ุฅุถุงูุฉ ุนูููุฉ ุงูุดุฑุงุกุ ููุง ูุณูุญ ูููุณุชุฎุฏู ุจุชุญููู ุฃู ุนูููุฉ ุดุฑุงุก ุฅูู ุชูุณูุท ุจุณูููุฉ.

**ุงูุชุงุฑูุฎ**: 2025-10-10  
**ุงูููู ุงููุนุฏู**: `src/components/cards/add-purchase-dialog.tsx`

---

## โ ุงูููุฒุงุช ุงููููุฐุฉ

### 1๏ธโฃ ููุชุงุญ ุชุจุฏูู ุงูุชูุณูุท

**ุงููููุน**: ูู ูููุฐุฌ ุฅุถุงูุฉ ุนูููุฉ ุงูุดุฑุงุกุ ุจุนุฏ ุฎูุงุฑ "ุงุณุชุซูุงุก ูู ุงููุงุด ุจุงู"

**ุงููุตู**:
- โ ููุชุงุญ ุชุจุฏูู (Switch) ุจุนููุงู "ุชูุณูุท ุงููุนุงููุฉ"
- โ ุงูุชุฑุงุถูุงู: ูุนุทู
- โ ุนูุฏ ุงูุชูุนูู: ุชุธูุฑ ุญููู ุงูุชูุณูุท
- โ ููู ุฃุฒุฑู (#2563eb) ููุชูููุฒ
- โ ูุต ุชูุถูุญู: "ุชูุณูู ุงููุจูุบ ุนูู ุนุฏุฉ ุฃุดูุฑ ูุน ุฅููุงููุฉ ุฅุถุงูุฉ ููุงุฆุฏ ููุตุงุฑูู"

---

### 2๏ธโฃ ุญููู ุงูุชูุณูุท

**ุชุธูุฑ ููุท ุนูุฏ ุชูุนูู ููุชุงุญ ุงูุชูุณูุท**

#### ุฃ. ุนุฏุฏ ุงูุฃุดูุฑ (ุฅูุฒุงูู):
- **ุงูููุน**: Number Input
- **ุงูููู**: ูู 3 ุฅูู 60 ุดูุฑ
- **ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ**: 12 ุดูุฑ
- **ุงูุชุญูู**: ูุทููุจ ุนูุฏ ุชูุนูู ุงูุชูุณูุท

#### ุจ. ูุณุจุฉ ุงููุงุฆุฏุฉ (ุงุฎุชูุงุฑู):
- **ุงูููุน**: Number Input
- **ุงูููู**: ูู 0% ููุง ููู
- **ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ**: 1.5%
- **ููุงุญุธุฉ**: 0 ููุชูุณูุท ุจุฏูู ููุงุฆุฏ

#### ุฌ. ุงููุตุงุฑูู ุงูุฅุฏุงุฑูุฉ (ุงุฎุชูุงุฑู):
- **ุงูููุน**: Number Input
- **ุงูููู**: ูู 0 ููุง ููู
- **ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ**: 120 ุฌููู
- **ููุงุญุธุฉ**: ุชุถุงู ูููุณุท ุงูุฃูู ููุท

---

## ๐งฎ ุงูุญุณุงุจุงุช ุงููุทุจูุฉ

### 1. ุญุณุงุจ ุงููุงุฆุฏุฉ ุงูุฅุฌูุงููุฉ:
```javascript
ุฅุฌูุงูู ุงููุงุฆุฏุฉ = (ูุจูุบ ุงููุนุงููุฉ ร ูุณุจุฉ ุงููุงุฆุฏุฉ รท 100)
```

**ูุซุงู**:
- ูุจูุบ ุงููุนุงููุฉ: 12,000 ุฌููู
- ูุณุจุฉ ุงููุงุฆุฏุฉ: 1.5%
- ุฅุฌูุงูู ุงููุงุฆุฏุฉ: 12,000 ร 1.5 รท 100 = **180 ุฌููู**

---

### 2. ุญุณุงุจ ุงููุจูุบ ุจุนุฏ ุงููุงุฆุฏุฉ:
```javascript
ุงููุจูุบ ุจุนุฏ ุงููุงุฆุฏุฉ = ูุจูุบ ุงููุนุงููุฉ + ุฅุฌูุงูู ุงููุงุฆุฏุฉ
```

**ูุซุงู**:
- ูุจูุบ ุงููุนุงููุฉ: 12,000 ุฌููู
- ุฅุฌูุงูู ุงููุงุฆุฏุฉ: 180 ุฌููู
- ุงููุจูุบ ุจุนุฏ ุงููุงุฆุฏุฉ: 12,000 + 180 = **12,180 ุฌููู**

---

### 3. ุญุณุงุจ ุงููุณุท ุงูุดูุฑู ุงูุฃุณุงุณู:
```javascript
ุงููุณุท ุงูุดูุฑู ุงูุฃุณุงุณู = ุงููุจูุบ ุจุนุฏ ุงููุงุฆุฏุฉ รท ุนุฏุฏ ุงูุฃุดูุฑ
```

**ูุซุงู**:
- ุงููุจูุบ ุจุนุฏ ุงููุงุฆุฏุฉ: 12,180 ุฌููู
- ุนุฏุฏ ุงูุฃุดูุฑ: 12 ุดูุฑ
- ุงููุณุท ุงูุดูุฑู ุงูุฃุณุงุณู: 12,180 รท 12 = **1,015 ุฌููู**

---

### 4. ุญุณุงุจ ุงููุณุท ุงูุฃูู:
```javascript
ุงููุณุท ุงูุฃูู = ุงููุณุท ุงูุดูุฑู ุงูุฃุณุงุณู + ุงููุตุงุฑูู ุงูุฅุฏุงุฑูุฉ ุงููุงููุฉ
```

**ูุซุงู**:
- ุงููุณุท ุงูุฃุณุงุณู: 1,015 ุฌููู
- ุงููุตุงุฑูู ุงูุฅุฏุงุฑูุฉ: 120 ุฌููู
- ุงููุณุท ุงูุฃูู: 1,015 + 120 = **1,135 ุฌููู**

---

### 5. ุงูุฃูุณุงุท ุงููุชุจููุฉ:
```javascript
ุงููุณุท ุงูุดูุฑู (ูู ุงูุดูุฑ 2 ุญุชู ุงูููุงูุฉ) = ุงููุณุท ุงูุดูุฑู ุงูุฃุณุงุณู ููุท
```

**ูุซุงู**:
- ุงููุณุท ุงูุดูุฑู: **1,015 ุฌููู** (ุซุงุจุช ูุฌููุน ุงูุฃุดูุฑ ูู 2 ุฅูู 12)

---

### 6. ุงูุชูููุฉ ุงูุฅุฌูุงููุฉ:
```javascript
ุงูุชูููุฉ ุงูุฅุฌูุงููุฉ = ูุจูุบ ุงููุนุงููุฉ + ุฅุฌูุงูู ุงููุงุฆุฏุฉ + ุงููุตุงุฑูู ุงูุฅุฏุงุฑูุฉ
```

**ูุซุงู**:
- ูุจูุบ ุงููุนุงููุฉ: 12,000 ุฌููู
- ุฅุฌูุงูู ุงููุงุฆุฏุฉ: 180 ุฌููู
- ุงููุตุงุฑูู ุงูุฅุฏุงุฑูุฉ: 120 ุฌููู
- ุงูุชูููุฉ ุงูุฅุฌูุงููุฉ: 12,000 + 180 + 120 = **12,300 ุฌููู**

---

## ๐ ููุฎุต ุงูุญุณุงุจุงุช ูู ุงููููุฐุฌ

**ุนูุฏ ุชูุนูู ุงูุชูุณูุทุ ูุธูุฑ ููุฎุต ููุตู ูุชุถูู**:

1. โ **ูุจูุบ ุงููุนุงููุฉ ุงูุฃุตูู**: ุงููุจูุบ ูุจู ุฃู ุฅุถุงูุงุช
2. โ **ูุณุจุฉ ุงููุงุฆุฏุฉ**: ุงููุณุจุฉ ุงููุฆููุฉ ุงููุทุจูุฉ
3. โ **ุฅุฌูุงูู ุงููุงุฆุฏุฉ**: ุงููุจูุบ ุงูุฅุฌูุงูู ูููุงุฆุฏุฉ
4. โ **ุงููุตุงุฑูู ุงูุฅุฏุงุฑูุฉ**: ุงููุตุงุฑูู ุงูุซุงุจุชุฉ
5. โ **ุนุฏุฏ ุงูุฃุดูุฑ**: ูุฏุฉ ุงูุชูุณูุท
6. โ **ุงููุณุท ุงูุฃูู**: ุงููุณุท ุงูุฃุณุงุณู + ุงููุตุงุฑูู ุงูุฅุฏุงุฑูุฉ
7. โ **ุงููุณุท ุงูุดูุฑู**: ุงููุณุท ุงูุฃุณุงุณู ููุท (ูู ุงูุดูุฑ 2)
8. โ **ุงูุชูููุฉ ุงูุฅุฌูุงููุฉ**: ุงููุจูุบ ุงูููุงุฆู ุงูููู

**ุงูุฃููุงู**:
- ๐ต ุฃุฒุฑู (#2563eb) ููุฃูุณุงุท ุงูุดูุฑูุฉ
- ๐ด ุฃุญูุฑ (#dc2626) ููููุงุฆุฏ ูุงููุตุงุฑูู ูุงูุชูููุฉ ุงูุฅุฌูุงููุฉ
- ๐ ุจุฑุชูุงูู (#ea580c) ููุณุจุฉ ุงููุงุฆุฏุฉ

---

## ๐พ ุญูุธ ุงูุจูุงูุงุช

### 1. ุจูุงูุงุช ุงููุนุงููุฉ:

**ูุชู ุญูุธ ุงููุนุงููุฉ ูุน ุนูุงูุฉ ุชูุณูุท**:
```javascript
{
  id: "timestamp",
  type: "withdrawal",
  amount: totalAmount,
  baseAmount: amount,
  purchaseFee: purchaseFee,
  cashback: cashback,
  excludedFromCashback: excludeFromCashback,
  description: "...",
  merchant: "...",
  category: "...",
  transactionDate: "...",
  cardId: "...",
  isInstallment: true  // โ ุนูุงูุฉ ุงูุชูุณูุท
}
```

---

### 2. ุจูุงูุงุช ุงูุชูุณูุท:

**ูุชู ุฅูุดุงุก ุณุฌู ุชูุณูุท ุฌุฏูุฏ ูู localStorage**:
```javascript
{
  id: "timestamp_inst",
  cardId: "1",
  merchantName: "ูุงุฑููุฑ",
  merchantId: "1",
  totalAmount: 12000,
  monthlyPayment: 1015,
  baseMonthlyPayment: 1015,
  monthlyInterest: 15,
  monthlyAdminFees: 0,
  totalMonths: 12,
  paidMonths: 0,
  remainingMonths: 12,
  startDate: "2025-01-10",
  endDate: "2026-01-10",
  installmentType: "with-interest",
  interestRate: 1.5,
  administrativeFees: 120,
  totalInterest: 180,
  totalAdminFees: 120,
  totalCost: 12300,
  status: "active",
  nextPaymentDate: "2025-02-10",
  nextPaymentAmount: 1135,
  firstPayment: 1135,
  createdAt: "2025-01-10T12:00:00.000Z",
  purchaseId: "timestamp"
}
```

**ุงูููุชุงุญ ูู localStorage**: `installments_{cardId}`

---

## ๐ ุฑุจุท ูุน ุชุจููุจ ุงูุชูุณูุท

**ุนูุฏ ุฅุถุงูุฉ ูุนุงููุฉ ููุณุทุฉ**:
1. โ ูุชู ุญูุธ ุงููุนุงููุฉ ูู ูุงุฆูุฉ ุงููุนุงููุงุช
2. โ ูุชู ุฅูุดุงุก ุณุฌู ุชูุณูุท ุฌุฏูุฏ
3. โ ูุชู ุญูุธ ุงูุชูุณูุท ูู localStorage
4. โ ูุธูุฑ ุงูุชูุณูุท ุชููุงุฆูุงู ูู ุชุจููุจ "ุงูุชูุณูุท"
5. โ ูุชู ุชุญุฏูุซ ุงูุฅุญุตุงุฆูุงุช ุชููุงุฆูุงู

---

## ๐ ุฑุจุท ูุน ูุดู ุงูุญุณุงุจ

**ูู ูุดู ุงูุญุณุงุจ ุงูุดูุฑู**:

### ุงูุดูุฑ ุงูุฃูู:
- **ุงููุจูุบ**: ุงููุณุท ุงูุฃูู (ุงููุณุท ุงูุฃุณุงุณู + ุงููุตุงุฑูู ุงูุฅุฏุงุฑูุฉ)
- **ูุซุงู**: 1,135 ุฌููู
- **ุงูููุน**: "ูุณุท ุดูุฑู - ูุงุฑููุฑ"

### ุงูุฃุดูุฑ ุงููุชุจููุฉ (2-12):
- **ุงููุจูุบ**: ุงููุณุท ุงูุดูุฑู ุงูุฃุณุงุณู ููุท
- **ูุซุงู**: 1,015 ุฌููู
- **ุงูููุน**: "ูุณุท ุดูุฑู - ูุงุฑููุฑ"

---

## ๐จ ุงูุชุตููู

### ุงูุฃููุงู:
- **ุฎูููุฉ ูุณู ุงูุชูุณูุท**: `bg-blue-50 dark:bg-blue-950/30`
- **ุญุฏูุฏ**: `border-blue-200 dark:border-blue-700`
- **ุงููุตูุต**: `#2563eb` (ุฃุฒุฑู)
- **ุงูููุงุฆุฏ ูุงููุตุงุฑูู**: `#dc2626` (ุฃุญูุฑ)

### ุงูุฃููููุงุช:
- **Calculator**: ูุนููุงู "ุชูุงุตูู ุงูุชูุณูุท"
- **AlertCircle**: ููููุงุญุธุงุช ุงููุงูุฉ

---

## ๐ ุงูุงุณุชุฎุฏุงู

### ุฎุทูุงุช ุฅุถุงูุฉ ูุนุงููุฉ ููุณุทุฉ:

```
1. ุงูุชุญ ุตูุญุฉ ุชูุงุตูู ุงูุจุทุงูุฉ: http://localhost:3003/cards/1
2. ุงููุฑ ุนูู ุฒุฑ "ุดุฑุงุก" ๐
3. ุงููุฃ ุจูุงูุงุช ุงููุนุงููุฉ:
   - ุงููุจูุบ: 12,000
   - ุงููุตู: ุดุฑุงุก ูู ูุงุฑููุฑ
   - ุงูููุงู: ูุงุฑููุฑ
   - ุงููุฆุฉ: ุทุนุงู ููุดุฑูุจุงุช
4. ูุนูู ููุชุงุญ "ุชูุณูุท ุงููุนุงููุฉ" โ
5. ุฃุฏุฎู ุชูุงุตูู ุงูุชูุณูุท:
   - ุนุฏุฏ ุงูุฃุดูุฑ: 12
   - ูุณุจุฉ ุงููุงุฆุฏุฉ: 1.5%
   - ุงููุตุงุฑูู ุงูุฅุฏุงุฑูุฉ: 120
6. ุดุงูุฏ ููุฎุต ุงูุญุณุงุจุงุช ุงูุชููุงุฆู
7. ุงููุฑ "ุฅุถุงูุฉ ุงูุนูููุฉ"
```

**ุงููุชูุฌุฉ**:
- โ ุชูุช ุฅุถุงูุฉ ุงููุนุงููุฉ
- โ ุชู ุฅูุดุงุก ุณุฌู ุงูุชูุณูุท
- โ ูุธูุฑ ูู ุชุจููุจ "ุงูุชูุณูุท"
- โ ุชุญุฏูุซ ุงูุฅุญุตุงุฆูุงุช

---

## ๐ ูุซุงู ุนููู ูุงูู

### ุงูุจูุงูุงุช ุงููุฏุฎูุฉ:
- **ูุจูุบ ุงููุนุงููุฉ**: 12,000 ุฌููู
- **ุงูุชุงุฌุฑ**: ูุงุฑููุฑ
- **ุนุฏุฏ ุงูุฃุดูุฑ**: 12 ุดูุฑ
- **ูุณุจุฉ ุงููุงุฆุฏุฉ**: 1.5%
- **ุงููุตุงุฑูู ุงูุฅุฏุงุฑูุฉ**: 120 ุฌููู

### ุงูุญุณุงุจุงุช:
1. **ุฅุฌูุงูู ุงููุงุฆุฏุฉ**: 12,000 ร 1.5% = **180 ุฌููู**
2. **ุงููุจูุบ ุจุนุฏ ุงููุงุฆุฏุฉ**: 12,000 + 180 = **12,180 ุฌููู**
3. **ุงููุณุท ุงูุฃุณุงุณู**: 12,180 รท 12 = **1,015 ุฌููู**
4. **ุงููุณุท ุงูุฃูู**: 1,015 + 120 = **1,135 ุฌููู**
5. **ุงูุฃูุณุงุท ุงููุชุจููุฉ**: **1,015 ุฌููู** ร 11 ุดูุฑ
6. **ุงูุชูููุฉ ุงูุฅุฌูุงููุฉ**: 12,000 + 180 + 120 = **12,300 ุฌููู**

### ูุง ูุธูุฑ ูู ูุดู ุงูุญุณุงุจ:
| ุงูุดูุฑ | ุงููุจูุบ | ุงููุตู |
|-------|--------|-------|
| 1 | 1,135 ุฌููู | ูุณุท ุดูุฑู - ูุงุฑููุฑ (ูุน ูุตุงุฑูู) |
| 2-12 | 1,015 ุฌููู | ูุณุท ุดูุฑู - ูุงุฑููุฑ |

---

## โ ุงูุฎูุงุตุฉ

ุชู ุชุทููุฑ ููุฒุฉ ุชูุณูุท ุงููุนุงููุงุช ุจูุฌุงุญ ูุน:

**ุงูููุฒุงุช**:
- โ ููุชุงุญ ุชุจุฏูู ุณูู ุงูุงุณุชุฎุฏุงู
- โ 3 ุญููู ููุชูุณูุท (ุฃุดูุฑุ ูุงุฆุฏุฉุ ูุตุงุฑูู)
- โ ุญุณุงุจุงุช ุชููุงุฆูุฉ ุฏูููุฉ
- โ ููุฎุต ููุตู ููุงุถุญ
- โ ุญูุธ ุชููุงุฆู ูู localStorage
- โ ุฑุจุท ูุน ุชุจููุจ ุงูุชูุณูุท
- โ ุฏุนู ูุงูู ูููุถุน ุงููููู

**ุงูุญุณุงุจุงุช**: 6 ูุนุงุฏูุงุช ุฏูููุฉ  
**ุงูุญุงูุฉ**: โ **ููุชูู ูุฌุงูุฒ ููุงุณุชุฎุฏุงู!**

---

**ุชู ุงูุชุทููุฑ ุจูุงุณุทุฉ**: Augment Agent  
**ุงูุชุงุฑูุฎ**: 2025-10-10  
**ุงูุฅุตุฏุงุฑ**: 1.0.0

